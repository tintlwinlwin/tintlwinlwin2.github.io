<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Thalesgroup">
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Voice Capture - TDI SDK v2.0.0</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/hybrid.min.css">

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/groovy.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/kotlin.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/java.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/json.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="index.html">TDI SDK v2.0.0</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="index.html" class="nav-link">Overview</a>
                            </li>
                            <li class="navitem">
                                <a href="get_started_android.html" class="nav-link">Get Started</a>
                            </li>
                            <li class="navitem">
                                <a href="api.html" class="nav-link">API</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Capture Tools <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="capture_tools_main.html" class="dropdown-item">Overview</a>
</li>
                                    
<li>
    <a href="capture_tools_id_document_capture.html" class="dropdown-item">ID Document Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_face_liveness_capture.html" class="dropdown-item">Selfie Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_native_id_document_capture.html" class="dropdown-item">Native ID Document Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_contract_signature_capture.html" class="dropdown-item">Contract / Signature Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_contract_esignature_capture.html" class="dropdown-item">Web Contract / Signature Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_non_id_document_capture.html" class="dropdown-item">Non-ID Document Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_nfc_mrz_document_capture.html" class="dropdown-item">NFC / MRZ Document Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_voice_capture.html" class="dropdown-item active">Voice Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_fingerprint_capture.html" class="dropdown-item">FingerPrint Capture</a>
</li>
                                    
<li>
    <a href="capture_tools_editable_response_capture.html" class="dropdown-item">Editable Response Update</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="profile_api.html" class="nav-link">Profile API</a>
                            </li>
                            <li class="navitem">
                                <a href="error_guide.html" class="nav-link">Error Guide</a>
                            </li>
                            <li class="navitem">
                                <a href="security.html" class="nav-link">Security</a>
                            </li>
                            <li class="navitem">
                                <a href="fcm_integration.html" class="nav-link">FCM</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="capture_tools_nfc_mrz_document_capture.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="capture_tools_fingerprint_capture.html" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#voice-capture" class="nav-link">Voice Capture</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#a-thales-tool-by-tdi" class="nav-link">A Thales tool by TDI</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#captors" class="nav-link">Captors</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#customization" class="nav-link">Customization</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#captors-configuration" class="nav-link">Captors configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#audio-sources" class="nav-link">Audio sources:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#audio-source-parameters" class="nav-link">Audio source parameters:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#captor-callback" class="nav-link">Captor Callback</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#ui-configuration" class="nav-link">UI configuration:</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#text-labels" class="nav-link">Text labels:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#assets" class="nav-link">Assets:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="voice-capture">Voice Capture</h1>
<p></br></p>
<h2 id="a-thales-tool-by-tdi">A Thales tool by TDI</h2>
<hr />
<p>Current version: 2.0.0</p>
<p>No License required</p>
<p>This tool will help you to capture user voice for an enrollment or an authentication (RFU)
The IDP/Biomatch mechanism is used for authentication for SDK version 1.5.0</p>
<p>This captor allows to:</p>
<ul>
<li>Record voice for user enrollment or authentication (RFU)<ul>
<li>NEW: Manage a sentence retries (from 1 to 5), default will be 3.</li>
<li>For authentication, retries count must be to 1 (RFU)</li>
</ul>
</li>
<li>Detect automatically the sentence retries count</li>
<li>Play recorded voice for user validation</li>
<li>Use microphone to record in mono (1 channel)</li>
<li>Detect invalid record duration by displaying a warning (optional)</li>
</ul>
<p><img title="" src="img\voice_captor_1.png" alt="" width="265"> <img title="" src="img\voice_captor_2.png" alt="" width="266"></p>
<p></br></p>
<h2 id="captors">Captors</h2>
<hr />
<p> <pre><code class=kotlin>val tdiMobileSdk = TdiMobileSdk.getInstance()
tdiMobileSdk.captorProvider[&quot;Voice&quot;]      
</code></pre></p>
<p></br></p>
<h2 id="customization">Customization</h2>
<hr />
<h3 id="captors-configuration">Captors configuration</h3>
<p>​           Captors can get a config Map<key,value> to set different capture parameters.</p>
<p> <pre><code class=kotlin>TdiMobileSdk.getInstance().tdiMobileSdk.captorProvider[&quot;Voice&quot;]?.config = mutableMapOf()
&quot;EXTRA_CAPTOR_SKIPPABLE&quot; to true, // Display a SKIP buttton allowing user to skip the capture. false by default
&quot;EXTRA_SENTENCE_TO_RECORD&quot; to &quot;bla bla bla&quot;, // Sentence displayed and be used by user
&quot;EXTRA_RECORD_MAX_TIME&quot; to 10, // Set the maximum recording time in milliseconds, by default no limit (-1)
&quot;EXTRA_RECORD_NOISE_SUPRESSOR&quot; to true, // Enable device noise suppressor. true by default if the device supports this feature
&quot;EXTRA_RECORD_SAMPLE_RATE&quot; to 20050, // Record sample rate. 44100 by default
&quot;EXTRA_RECORD_AUDIO_SOURCE&quot; to MediaRecorder.AudioSource.MIC, // Record source. Microphone by default
&quot;EXTRA_RECORD_ENCODING&quot; to AudioFormat.ENCODING_PCM_16BIT, // Encoding format 8 or 16 bits. PCM 16 bits by default
&quot;EXTRA_DISPLAY_FINAL_WARNING&quot; to true, // Display a warning if captor estimates the record level/length is not compatible with the sentence length. true by default
&quot;EXTRA_START_RECORDING_AFTER_TRY&quot; to true, // start to record when user retry. false by default
&quot;EXTRA_RECORD_VOICE_DETECTION_THREESHOLD&quot; to 50, // Level in dB to detect user voice. 55 by default
&quot;EXTRA_RECORD_VOICE_DETECTION_CHARACTERS_PER_SECOND&quot; to 20, // Characters by sec to allow to estimate if the recorded voice seems compatible with the length of the sentence. 15 by default
&quot;EXTRA_SENTENCE_COUNT&quot; to true, // set the number of sentence retries to record, default is 3
&quot;EXTRA_RECORD_VOICE_SILENCE_THREESHOLD&quot; to true, // set the silence duration time to detect end of sentence, default is 300ms
&quot;EXTRA_CAPTOR_CALLBACK&quot; to captorCallback // see below Captor.Callback object
</code></pre></p>
<h3 id="audio-sources">Audio sources:</h3>
<p>Encoding formats: ENCODING_PCM_8BIT - ENCODING_PCM_16BIT, others formats are not supported.</p>
<h3 id="audio-source-parameters">Audio source parameters:</h3>
<p><a href="https://developer.android.com/reference/android/media/MediaRecorder.AudioSource" target="_blank">Audio source values</a></p>
<p>Audio sample rates: 8000 Hz - 11025 Hz - 22100 Hz - 32000 Hz - 44100 Hz - 48000 Hz
<a href="https://en.wikipedia.org/wiki/Sampling_%28signal_processing%29" target="_blank">More info</a></p>
<p>This sample rate allows to apply a recording quality and WAV file size is proportional.</p>
<p>Best value: <b>22100Hz</b>, file size: 428KB for 10 sec (214KB for 11025 Hz)</p>
<h3 id="captor-callback"><strong>Captor Callback</strong></h3>
<p> <pre><code class=kotlin>val captorCallback = object : Captor.Callback{
    override fun onDataCaptured(input: Input) {
        input.pages[&quot;page1&quot;] // voice WAV file encoded in base64
        input.pages[&quot;metadata_sentence&quot;] // Sentence displayed and used by the user
    }

    override fun onFailure(failure: Failure) {
        // Capture failed, see Error guide chapter to identify what's the reason.
    }
}
</code></pre></p>
<p>Captor.Callback is an optional config to help you to:</p>
<ol>
<li>
<p>Collect the data captured during a call of resume() API. Those data are automatically sent to server by TDI sdk after Capture, what you get here, is only for you if you need. Please be sure to keep it safe.</p>
</li>
<li>
<p>Listening what's happening on Failure scenario, see Error guide Chapter for reference. It could be a simple Cancel by pressing Back button or tool issue.</p>
</li>
</ol>
<p></br></p>
<h2 id="ui-configuration">UI configuration:</h2>
<h3 id="text-labels">Text labels:</h3>
<p>All labels are provide by the Profile API 2.0
</br>
If the profile API is not available: default labels are provided by the application.</p>
<h3 id="assets">Assets:</h3>
<p>All assets (icons, colors, styles) from the SDK can be overwridden by the application assets using the same identifier with new content.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>All Rights Reserved, this document is provided in confidence. No part of it may be reproduced or communicated externally without the written permission of Thalesgroup. The information in this document is confidential and may be legally privileged. Access to its contents by anyone else is unauthorized; any disclosure, copying, distribution or any action taken or omitted to be taken in reliance on it, is prohibited and may be unlawful.</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
